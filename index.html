<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <meta name="robots" content="noindex" />
    <title>Taste Carte ― あなた専用メニューを描く一枚のカルテ ―</title>
    <meta name="description" content="サイトの概要を記入します。" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;500&family=Noto+Sans+JP&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./CSS/style.css" />
    <link rel="stylesheet" href="./CSS/reset.css" />
  </head>
<body>
  <header class="app-header">
    <div class="app-title-wrap">
      <div class="app-title-main">Taste Carte</div>
      <div class="app-title-sub">― あなた専用メニューを描く一枚のカルテ ―</div>
    </div>

    <div class="header-controls">
      <div class="lang-selector">
        <button id="langToggle" class="lang-button" aria-haspopup="true" aria-expanded="false">
          <span id="langLabel">JP</span> ▾
        </button>
        <div id="langDropdown" class="lang-dropdown" role="menu">
          <button type="button" class="lang-option" data-lang="JP">JP</button>
          <button type="button" class="lang-option" data-lang="EN">EN</button>
        </div>
      </div>
      <button id="fontToggle" class="font-button">A+</button>
    </div>
  </header>

  <main class="app-main">
    <!-- 0. ウェルカム -->
    <section class="page page-active" data-step="0" aria-label="スタート画面">
      <div class="welcome-page">
        <img src="./img/quantumcafe.png" alt="Quantum Café ロゴ" class="welcome-logo" />
        <h1 class="welcome-heading">ようこそ、Quantum Caféへ</h1>
        <p class="welcome-sub">
          あなたの好みと食の制約に合わせて、最適なパスタ・サラダ・クレープ・ドリンクをご提案します。
        </p>
        <p class="welcome-note">
          このあとは、順番に質問にお答えください。<br />
          <span class="welcome-note-small">所要時間の目安： 約1〜2分</span>
        </p>
        <button id="startButton" class="primary-button large">スタート</button>
      </div>
    </section>

    <!-- 1. 好きな食べ物 -->
    <section class="page" data-step="1" aria-label="好きな食べ物">
      <div class="page-inner">
        <h2 class="page-title">好きな食べ物を5つ教えてください</h2>

        <div class="card">
          <div class="card-header">
            <h3>音声入力</h3>
            <p class="card-help">
              マイクを押して話し、「完了」で次の入力欄へ。5つ入力すると自動で次へ進みます。
            </p>
          </div>
          <div class="voice-input-list" id="foodVoiceList">
            <!-- 1〜5行を JS で生成 -->
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>ペン入力</h3>
            <p class="card-help">自由にメモできます（任意）。</p>
          </div>
          <textarea id="foodFreeText" class="text-area" rows="4" placeholder="好きな食べ物や、細かいこだわりなどがあればご記入ください。"></textarea>
        </div>
      </div>
    </section>

    <!-- 2. 好きなスイーツ・お菓子 -->
    <section class="page" data-step="2" aria-label="好きなスイーツやお菓子">
      <div class="page-inner">
        <h2 class="page-title">好きなスイーツやお菓子を5つ選んでください</h2>

        <div class="card">
          <div class="card-header">
            <h3>音声入力</h3>
            <p class="card-help">
              マイクを押して話し、「完了」で次の入力欄へ。5つ入力すると自動で次へ進みます。
            </p>
          </div>
          <div class="voice-input-list" id="sweetsVoiceList">
            <!-- 1〜5行を JS で生成 -->
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>ペン入力</h3>
            <p class="card-help">自由にメモできます（任意）。</p>
          </div>
          <textarea id="sweetsFreeText" class="text-area" rows="4" placeholder="好きなお菓子や甘さの好みがあればご記入ください。"></textarea>
        </div>
      </div>
    </section>

    <!-- 3. 食の制約 -->
    <section class="page" data-step="3" aria-label="食の制約">
      <div class="page-inner">
        <h2 class="page-title">食の制約</h2>

        <!-- アレルギー -->
        <div class="card">
          <div class="card-header">
            <h3>アレルギー</h3>
          </div>
          <input
            id="allergySearch"
            type="text"
            class="input"
            placeholder="食材を検索（例：乳、小麦、えび…）"
          />
          <p class="card-help small">
            Enterキーで追加／選択できます。タップしてオン・オフ切り替え。
          </p>
          <div id="allergyChips" class="chip-container">
            <!-- JS で 28品目チップ生成 -->
          </div>
        </div>

        <!-- 宗教的禁忌 -->
        <div class="two-column">
          <div class="card">
            <div class="card-header">
              <h3>宗教的禁忌</h3>
              <p class="card-sub">Halal / Kosher / 豚NG / 酒NG など</p>
            </div>
            <div class="checkbox-list">
              <label><input type="checkbox" name="religion" value="halal" /> ハラール対応希望</label>
              <label><input type="checkbox" name="religion" value="no-pork" /> 豚肉NG</label>
              <label><input type="checkbox" name="religion" value="no-alcohol" /> アルコールNG</label>
            </div>
          </div>

          <!-- ライフスタイル -->
          <div class="card">
            <div class="card-header">
              <h3>ライフスタイル</h3>
              <p class="card-sub">ヴィーガン／ベジタリアンなど</p>
            </div>
            <div class="checkbox-list">
              <label><input type="checkbox" name="lifestyle" value="vegan" /> ヴィーガン</label>
              <label><input type="checkbox" name="lifestyle" value="vegetarian" /> ベジタリアン</label>
              <label><input type="checkbox" name="lifestyle" value="lacto" /> ラクト（乳製品OK）</label>
              <label><input type="checkbox" name="lifestyle" value="pescetarian" /> ペスカタリアン</label>
            </div>
          </div>
        </div>

        <!-- 食物不耐性 -->
        <div class="card">
          <div class="card-header">
            <h3>食物不耐性</h3>
            <p class="card-sub">体質的に量が多いとつらくなるもの</p>
          </div>
          <div class="checkbox-list checkbox-inline">
            <label><input type="checkbox" name="intolerance" value="lactose" /> 乳糖不耐症</label>
            <label><input type="checkbox" name="intolerance" value="gluten" /> グルテン不耐症</label>
            <label><input type="checkbox" name="intolerance" value="fructose" /> 果糖不耐症</label>
            <label><input type="checkbox" name="intolerance" value="other" /> その他（スタッフに相談したい）</label>
          </div>
        </div>
      </div>
    </section>

    <!-- 4. 体調・気分 -->
    <section class="page" data-step="4" aria-label="体調と気分">
      <div class="page-inner">
        <h2 class="page-title">体調・気分</h2>

        <div class="two-column">
          <!-- 自動測定 -->
          <div class="card">
            <div class="card-header">
              <h3>自動測定を試す</h3>
            </div>
            <button id="autoMeasureButton" class="primary-button full-width">自動測定を試す</button>
            <p class="card-help small">
              任意。将来、カメラPPG／ウォッチ連携に対応予定です。
            </p>
            <p id="autoMeasureStatus" class="card-help small muted"></p>
          </div>

          <!-- 気分スライダー -->
          <div class="card">
            <div class="card-header">
              <h3>いまの気分（さっぱり ↔ こってり）</h3>
            </div>
            <input
              id="moodSlider"
              type="range"
              min="0"
              max="100"
              value="50"
              class="slider"
            />
            <div class="slider-labels">
              <span>さっぱり</span>
              <span>ふつう</span>
              <span>こってり</span>
            </div>

            <div class="checkbox-list mood-options">
              <label><input type="checkbox" name="condition" value="pregnant" /> 妊娠中</label>
              <label><input type="checkbox" name="condition" value="non-caffeine" /> ノンカフェイン</label>
              <label><input type="checkbox" name="condition" value="low-caffeine" /> 低カフェイン</label>
              <label><input type="checkbox" name="condition" value="low-sugar" /> 低糖</label>
              <label><input type="checkbox" name="condition" value="low-fat" /> 低脂</label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 5. サマリー＆同意 -->
    <section class="page" data-step="5" aria-label="サマリーと同意">
      <div class="page-inner">
        <h2 class="page-title">サマリー＆同意</h2>

        <div class="summary-list">
          <div class="summary-row">
            <div class="summary-label">好み</div>
            <div class="summary-value" id="summaryTaste">―</div>
            <button class="secondary-button summary-edit" data-edit-step="1">編集</button>
          </div>
          <div class="summary-row">
            <div class="summary-label">制約</div>
            <div class="summary-value" id="summaryRestriction">―</div>
            <button class="secondary-button summary-edit" data-edit-step="3">編集</button>
          </div>
          <div class="summary-row">
            <div class="summary-label">体調</div>
            <div class="summary-value" id="summaryCondition">気分 50</div>
            <button class="secondary-button summary-edit" data-edit-step="4">編集</button>
          </div>
        </div>

        <label class="consent-line">
          <input type="checkbox" id="consentCheckbox" />
          匿名IDで一時保存・会期終了後に削除に同意します
        </label>
        <p class="card-help small">「なぜこの質問？」 安全でおいしい提案のため</p>

        <div class="summary-actions">
          <button id="analyzeButton" class="primary-button" disabled>分析</button>
        </div>
      </div>
    </section>

    <!-- 6. あなたへのおすすめパスタ -->
    <section class="page" data-step="6" aria-label="おすすめパスタ">
      <div class="page-inner">
        <h2 class="page-title">あなたへのおすすめパスタ</h2>
        <div class="recommendation-list" id="pastaRecommendations">
          <!-- JS で3プラン生成 -->
        </div>
      </div>
    </section>

    <!-- 7. 調理キュー（パスタ） -->
    <section class="page" data-step="7" aria-label="調理キュー パスタ">
      <div class="page-inner">
        <h2 class="page-title">調理キュー（パスタ）</h2>

        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">番号</div>
            <div class="status-value" id="queuePastaNo">P-012</div>
          </div>
          <div class="status-card">
            <div class="status-label">ETA</div>
            <div class="status-value" id="queuePastaEta">04:30</div>
          </div>
          <div class="status-card">
            <div class="status-label">Live</div>
            <div class="status-value" id="queuePastaLive">ロボシェフ</div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>麺のゆで加減</h3>
            <p class="card-help">
              お好みの茹で上がりをお選びください。選択後に「次へ」を押すとサラダへ進みます。
            </p>
          </div>

          <div class="option-card-row" data-group="pasta-doneness">
            <button type="button" class="option-card" data-value="al-dente">
              <div class="option-title">アルデンテ</div>
              <div class="option-body">芯をわずかに残した、かための食感</div>
            </button>
            <button type="button" class="option-card" data-value="normal">
              <div class="option-title">標準</div>
              <div class="option-body">バランスの良いおすすめの茹で上がり</div>
            </button>
            <button type="button" class="option-card" data-value="soft">
              <div class="option-title">柔らかめ</div>
              <div class="option-body">ソースとなじむ、やわらかい食感</div>
            </button>
          </div>

          <p class="card-help small">※ 選択はいつでも戻って変更できます。</p>
          <div class="current-selection">
            現在の選択：<span id="pastaDonenessLabel">未選択</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 8. あなたへのおすすめサラダ -->
    <section class="page" data-step="8" aria-label="おすすめサラダ">
      <div class="page-inner">
        <h2 class="page-title">あなたへのおすすめサラダ</h2>
        <div class="recommendation-list" id="saladRecommendations">
          <!-- JS で3プラン生成 -->
        </div>
      </div>
    </section>

    <!-- 9. 調理キュー（サラダ） -->
    <section class="page" data-step="9" aria-label="調理キュー サラダ">
      <div class="page-inner">
        <h2 class="page-title">調理キュー（サラダ）</h2>

        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">番号</div>
            <div class="status-value" id="queueSaladNo">S-102</div>
          </div>
          <div class="status-card">
            <div class="status-label">ETA</div>
            <div class="status-value" id="queueSaladEta">03:10</div>
          </div>
          <div class="status-card">
            <div class="status-label">Live</div>
            <div class="status-value" id="queueSaladLive">ロボシェフ</div>
          </div>
        </div>

        <p class="card-help">
          サラダの具材やドレッシングは、先ほどの回答から自動で最適化されています。
        </p>
      </div>
    </section>

    <!-- 10. あなたへのおすすめクレープ -->
    <section class="page" data-step="10" aria-label="おすすめクレープ">
      <div class="page-inner">
        <h2 class="page-title">あなたへのおすすめクレープ</h2>
        <div class="recommendation-list" id="crepeRecommendations">
          <!-- JS で3プラン生成 -->
        </div>
      </div>
    </section>

    <!-- 11. 調理キュー（クレープ） -->
    <section class="page" data-step="11" aria-label="調理キュー クレープ">
      <div class="page-inner">
        <h2 class="page-title">調理キュー（クレープ）</h2>

        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">番号</div>
            <div class="status-value" id="queueCrepeNo">C-221</div>
          </div>
          <div class="status-card">
            <div class="status-label">ETA</div>
            <div class="status-value" id="queueCrepeEta">03:50</div>
          </div>
          <div class="status-card">
            <div class="status-label">Live</div>
            <div class="status-value" id="queueCrepeLive">ロボパティシエ</div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>甘さ加減</h3>
            <p class="card-help">
              お好みの甘さをお選びください。選択後「次へ」でドリンクへ進みます。
            </p>
          </div>

          <div class="option-card-row" data-group="crepe-sweetness">
            <button type="button" class="option-card" data-value="sweet">
              <div class="option-title">甘さ</div>
              <div class="option-body">しっかり甘めで満足感のある味わい</div>
            </button>
            <button type="button" class="option-card" data-value="mild">
              <div class="option-title">微甘</div>
              <div class="option-body">控えめな甘さで軽い仕上がり</div>
            </button>
            <button type="button" class="option-card" data-value="no-sugar">
              <div class="option-title">甘くない</div>
              <div class="option-body">糖分を抑えたすっきりテイスト</div>
            </button>
          </div>

          <p class="card-help small">※ 選択はいつでも戻って変更できます。</p>
          <div class="current-selection">
            現在の選択：<span id="crepeSweetnessLabel">未選択</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 12. あなたへのおすすめドリンク -->
    <section class="page" data-step="12" aria-label="おすすめドリンク">
      <div class="page-inner">
        <h2 class="page-title">あなたへのおすすめドリンク</h2>
        <div class="recommendation-list" id="drinkRecommendations">
          <!-- JS で3プラン生成 -->
        </div>
      </div>
    </section>

    <!-- 13. 調理キュー（ドリンク） -->
    <section class="page" data-step="13" aria-label="調理キュー ドリンク">
      <div class="page-inner">
        <h2 class="page-title">調理キュー（ドリンク）</h2>

        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">番号</div>
            <div class="status-value" id="queueDrinkNo">D-045</div>
          </div>
          <div class="status-card">
            <div class="status-label">ETA</div>
            <div class="status-value" id="queueDrinkEta">02:40</div>
          </div>
          <div class="status-card">
            <div class="status-label">Live</div>
            <div class="status-value" id="queueDrinkLive">バリスタロボ</div>
          </div>
        </div>

        <p class="card-help">
          カフェインや甘さの調整は、先ほどのご回答をもとに反映されています。
        </p>
      </div>
    </section>

    <!-- 14. スタッフヘルプ -->
    <section class="page" data-step="14" aria-label="スタッフヘルプ">
      <div class="page-inner">
        <h2 class="page-title">スタッフヘルプ</h2>

        <div class="two-column">
          <div class="card staff-card">
            <button id="callStaffButton" class="primary-button full-height">
              スタッフを呼ぶ
            </button>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>よくある質問</h3>
            </div>
            <ul class="faq-list">
              <li>データは匿名で保存されますか？</li>
              <li>宗教・アレルギーへの配慮は？</li>
              <li>AIと量子の役割は？</li>
            </ul>
          </div>
        </div>

        <p id="staffStatus" class="card-help status-message"></p>

        <div class="summary-actions">
          <button id="staffDoneButton" class="primary-button">完了</button>
        </div>
      </div>
    </section>

    <!-- 15. ご注文ありがとうございました -->
    <section class="page" data-step="15" aria-label="ご注文ありがとうございました">
      <div class="page-inner thankyou-page">
        <h2 class="page-title center">ご注文ありがとうございました</h2>
        <p class="thankyou-text">
          いただいた回答をもとに、あなただけのメニューをご用意いたします。<br />
          お好きなお席でくつろぎながら、出来上がりをお待ちください。
        </p>
        <button id="backToTopButton" class="primary-button">トップに戻る</button>
      </div>
    </section>
  </main>

  <!-- フッターナビ -->
  <footer class="app-footer">
    <button id="prevButton" class="secondary-button nav-button" disabled>戻る</button>

    <div id="progressDots" class="progress-dots">
      <!-- JS で 16個 のドット生成 -->
    </div>

    <button id="nextButton" class="primary-button nav-button">次へ</button>
  </footer>

  <script src="./js/script.js" defer></script>
</body>
</html>
