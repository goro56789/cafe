<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <meta name="robots" content="noindex" />
    <title>Taste Carte ― あなた専用メニューを描く一枚のカルテ ―</title>
    <meta name="description" content="サイトの概要を記入します。" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;500&family=Noto+Sans+JP&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./CSS/style.css" />
    <link rel="stylesheet" href="./CSS/reset.css" />
  </head>
<body>
  <div class="app">

    <!-- Header -->
    <header class="org-header" role="banner">
      <h1 class="brand-title" aria-label="Taste Carte あなた専用メニューを描く一枚のカルテ">
        <span class="brand-main">Taste Carte</span>
        <span class="brand-sub">― あなた専用メニューを描く一枚のカルテ</span>
      </h1>

      <div class="header-actions" role="group" aria-label="ヘッダー操作">
        <!-- Language -->
        <div class="lang-wrap">
          <button id="lang-toggle" class="btn btn-ghost" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="lang-menu">
            <span id="lang-indicator">JP</span> ▾
          </button>
          <div id="lang-menu" class="lang-menu" role="menu" hidden>
            <button role="menuitem" data-lang="ja" tabindex="-1" type="button">日本語（JP）</button>
            <button role="menuitem" data-lang="en" tabindex="-1" type="button">English（EN）</button>
            <button role="menuitem" data-lang="zh" tabindex="-1" type="button">简体中文（ZH）</button>
            <button role="menuitem" data-lang="ko" tabindex="-1" type="button">한국어（KO）</button>
          </div>
        </div>

        <button class="fab-accessibility" type="button" aria-label="アクセシビリティ設定">A+</button>
      </div>
    </header>

    <!-- Progress (top) -->
    <nav class="progress" aria-label="ステップ進捗">
      <ol>
        <li class="is-active"></li>
        <li></li><li></li><li></li><li></li>
      </ol>
    </nav>

    <!-- Main -->
    <main class="content" role="main">

      <!-- 01: Start -->
      <section class="tpl-step" data-step="1" data-active>
        <div class="stack gap-24 center">
          <!-- ★ ロゴ画像（中央寄せ） -->
          <img src="./img/quantumcafe.png" alt="Quantm Café ロゴ" class="brand-logo" />
          <h2 class="welcome-title">ようこそ、Quantm Caféへ</h2>
          <p class="lead">あなたの好みと食の制約に合わせて、最適なパスタとサラダ、ドリンクをご提案します。</p>
          <button id="start-btn" class="btn btn-primary btn-lg" type="button">スタート</button>
          <p class="caption">このあとは、順番に質問にお答えください。</p>
        </div>
      </section>

      <!-- 02: Favorites (Voice/Pen) -->
      <section class="tpl-step" data-step="2">
        <div class="stack gap-24">
          <h2 class="h1">好きな食べ物を5つ教えてください</h2>

          <div class="vstack">
            <!-- 音声入力（上） -->
            <div class="card stack gap-16">
              <h3 class="h2">音声入力</h3>
              <p class="caption">マイクを押して話し、「完了」で次の入力欄に進みます。</p>

              <div class="voice-row">
                <div class="voice-slot">
                  <div class="voice-controls">
                    <button class="btn btn-secondary mic-btn" data-idx="0" type="button">🎤 マイク</button>
                    <button class="btn btn-primary done-btn" data-idx="0" type="button" disabled>完了</button>
                  </div>
                  <div class="result-box" id="voice-result-0" aria-live="polite">未入力</div>
                </div>
                <div class="voice-slot">
                  <div class="voice-controls">
                    <button class="btn btn-secondary mic-btn" data-idx="1" type="button" disabled>🎤 マイク</button>
                    <button class="btn btn-primary done-btn" data-idx="1" type="button" disabled>完了</button>
                  </div>
                  <div class="result-box" id="voice-result-1" aria-live="polite">未入力</div>
                </div>
              </div>

              <div class="voice-row">
                <div class="voice-slot">
                  <div class="voice-controls">
                    <button class="btn btn-secondary mic-btn" data-idx="2" type="button" disabled>🎤 マイク</button>
                    <button class="btn btn-primary done-btn" data-idx="2" type="button" disabled>完了</button>
                  </div>
                  <div class="result-box" id="voice-result-2" aria-live="polite">未入力</div>
                </div>
                <div class="voice-slot">
                  <div class="voice-controls">
                    <button class="btn btn-secondary mic-btn" data-idx="3" type="button" disabled>🎤 マイク</button>
                    <button class="btn btn-primary done-btn" data-idx="3" type="button" disabled>完了</button>
                  </div>
                  <div class="result-box" id="voice-result-3" aria-live="polite">未入力</div>
                </div>
              </div>

              <div class="voice-row">
                <div class="voice-slot">
                  <div class="voice-controls">
                    <button class="btn btn-secondary mic-btn" data-idx="4" type="button" disabled>🎤 マイク</button>
                    <button class="btn btn-primary done-btn" data-idx="4" type="button" disabled>完了</button>
                  </div>
                  <div class="result-box" id="voice-result-4" aria-live="polite">未入力</div>
                </div>
              </div>
            </div>

            <!-- ペン入力（下） -->
            <div class="card stack gap-16">
              <h3 class="h2">ペン入力</h3>
              <p class="caption">好きな食べ物を手書きしてください（任意）。</p>
              <canvas id="pen-canvas" width="600" height="250" aria-label="手書きキャンバス"></canvas>
              <div class="actions-row">
                <button id="clear-canvas" class="btn btn-secondary" type="button">クリア</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 03: Restrictions -->
      <section class="tpl-step" data-step="3">
        <div class="stack gap-24">
          <h2 class="h1">食の制約</h2>

          <div class="card stack gap-16">
            <h3 class="h2">アレルギー</h3>
            <div class="search search-lg">
              <input type="search" id="allergy-search" placeholder="食材を検索（例：乳、小麦、えび…）" aria-label="アレルギー検索" />
            </div>
            <div id="allergy-chips" class="chips wrap allergy-group" role="group" aria-label="主要アレルゲン"></div>
            <div id="allergen-pills" class="selected-pills" aria-live="polite"></div>
          </div>

          <div class="grid-2">
            <div class="card toggle-card">
              <div class="toggle-head">
                <h3 class="h2">宗教的禁忌</h3>
                <span class="caption">Halal / Kosher / 豚NG / 酒NG</span>
              </div>
              <div class="toggle-list">
                <label class="switch"><input type="checkbox" data-religion="halal" />ハラール</label>
                <label class="switch"><input type="checkbox" data-religion="kosher" />コーシャ</label>
                <label class="switch"><input type="checkbox" data-religion="pork_ng" />豚NG</label>
                <label class="switch"><input type="checkbox" data-religion="alcohol_ng" />アルコールNG</label>
              </div>
            </div>

            <div class="card toggle-card">
              <div class="toggle-head">
                <h3 class="h2">ライフスタイル</h3>
                <span class="caption">ヴィーガン/ベジ各種</span>
              </div>
              <div class="toggle-list">
                <label class="switch"><input type="checkbox" data-life="vegan" />ヴィーガン</label>
                <label class="switch"><input type="checkbox" data-life="lacto" />ラクト</label>
                <label class="switch"><input type="checkbox" data-life="ovo" />オボ</label>
                <label class="switch"><input type="checkbox" data-life="pesco" />ペスコ</label>
                <label class="switch"><input type="checkbox" data-life="flexi" />フレキシ</label>
              </div>
            </div>
          </div>

          <div class="card toggle-card">
            <div class="toggle-head">
              <h3 class="h2">食物不耐症</h3>
              <span class="caption">乳糖・グルテンなど</span>
            </div>
            <div class="toggle-list">
              <label class="switch"><input type="checkbox" data-intolerance="lactose" />乳糖不耐症</label>
              <label class="switch"><input type="checkbox" data-intolerance="gluten" />グルテン不耐症</label>
            </div>
          </div>
        </div>
      </section>

      <!-- 04: Condition -->
      <section class="tpl-step" data-step="4">
        <div class="stack gap-24">
          <h2 class="h1">体調・気分</h2>
          <div class="grid-2">
            <div class="card stack gap-16">
              <button class="btn btn-primary" type="button" disabled>自動測定を試す</button>
              <p class="caption">※ 任意。将来、カメラPPG/ウォッチ連携に対応予定です。</p>
            </div>
            <div class="card stack gap-16">
              <label for="mood-slider" class="label">いまの気分（さっぱり ↔ こってり）</label>
              <input id="mood-slider" type="range" min="0" max="100" value="35" />
              <div class="toggles">
                <label class="switch"><input type="checkbox" id="pregnant-cond" />妊娠中</label>
                <label class="switch"><input type="checkbox" id="no-caffeine" />ノンカフェイン</label>
                <label class="switch"><input type="checkbox" id="low-caffeine" />低カフェイン</label>
                <label class="switch"><input type="checkbox" id="low-sugar" />低糖</label>
                <label class="switch"><input type="checkbox" id="low-fat" />低脂</label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 06: Summary -->
      <section class="tpl-step" data-step="6">
        <div class="stack gap-24">
          <h2 class="h1">サマリー & 同意</h2>
          <ul class="summary">
            <li class="summary-row">
              <span class="summary-key">好み</span>
              <span id="summary-taste" class="summary-val">—</span>
              <button class="btn btn-edit" data-jump="2" type="button" aria-label="好みを編集">編集</button>
            </li>
            <li class="summary-row">
              <span class="summary-key">制約</span>
              <span id="summary-restrictions" class="summary-val">—</span>
              <button class="btn btn-edit" data-jump="3" type="button" aria-label="制約を編集">編集</button>
            </li>
            <li class="summary-row">
              <span class="summary-key">体調</span>
              <span id="summary-condition" class="summary-val">—</span>
              <button class="btn btn-edit" data-jump="4" type="button" aria-label="体調を編集">編集</button>
            </li>
          </ul>

          <label class="consent">
            <input type="checkbox" id="consent-check" />
            匿名IDで一時保存・会期終了後に削除に同意します
          </label>
          <p class="caption">「なぜこの質問？」 <span class="link">安全でおいしい提案のため</span></p>
        </div>
      </section>

      <!-- 07: おすすめ（パスタ） -->
      <section class="tpl-step" data-step="7">
        <div class="stack gap-24">
          <h2 class="h1">あなたへのおすすめパスタ</h2>
          <div class="reco-grid">
            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">最適プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="pasta-1" alt="味レーダー（パスタ1）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-pasta-1">味プロファイルに基づく提案。</p></details>
              <button class="btn btn-order" data-go="8" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">代替プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="pasta-2" alt="味レーダー（パスタ2）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-pasta-2">嗜好の隣接レンジを提案。</p></details>
              <button class="btn btn-order" data-go="8" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">冒険プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="pasta-3" alt="味レーダー（パスタ3）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-pasta-3">安全枠内で新しい味レンジ。</p></details>
              <button class="btn btn-order" data-go="8" type="button">注文へ</button>
            </article>
          </div>
        </div>
      </section>

      <!-- 13: おすすめ（サラダ） -->
      <section class="tpl-step" data-step="13">
        <div class="stack gap-24">
          <h2 class="h1">あなたへのおすすめサラダ</h2>
          <div class="reco-grid">
            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">最適プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="salad-1" alt="味レーダー（サラダ1）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-salad-1">味プロファイルに基づく提案。</p></details>
              <button class="btn btn-order" data-go="16" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">代替プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="salad-2" alt="味レーダー（サラダ2）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-salad-2">嗜好の隣接レンジを提案。</p></details>
              <button class="btn btn-order" data-go="16" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">冒険プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="salad-3" alt="味レーダー（サラダ3）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-salad-3">安全枠内で新しい味レンジ。</p></details>
              <button class="btn btn-order" data-go="16" type="button">注文へ</button>
            </article>
          </div>
        </div>
      </section>

      <!-- 14: おすすめ（クレープ） -->
      <section class="tpl-step" data-step="14">
        <div class="stack gap-24">
          <h2 class="h1">あなたへのおすすめクレープ</h2>
          <div class="reco-grid">
            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">最適プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="crepe-1" alt="味レーダー（クレープ1）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-crepe-1">味プロファイルに基づく提案。</p></details>
              <button class="btn btn-order" data-go="17" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">代替プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="crepe-2" alt="味レーダー（クレープ2）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-crepe-2">嗜好の隣接レンジを提案。</p></details>
              <button class="btn btn-order" data-go="17" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">冒険プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="crepe-3" alt="味レーダー（クレープ3）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-crepe-3">安全枠内で新しい味レンジ。</p></details>
              <button class="btn btn-order" data-go="17" type="button">注文へ</button>
            </article>
          </div>
        </div>
      </section>

      <!-- 15: おすすめ（ドリンク） -->
      <section class="tpl-step" data-step="15">
        <div class="stack gap-24">
          <h2 class="h1">あなたへのおすすめドリンク</h2>
          <div class="reco-grid">
            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">最適プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="drink-1" alt="味レーダー（ドリンク1）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-drink-1">味プロファイルに基づく提案。</p></details>
              <button class="btn btn-order" data-go="18" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">代替プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="drink-2" alt="味レーダー（ドリンク2）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-drink-2">嗜好の隣接レンジを提案。</p></details>
              <button class="btn btn-order" data-go="18" type="button">注文へ</button>
            </article>

            <article class="reco card">
              <div class="badges"></div>
              <h3 class="h2">冒険プラン</h3>
              <div class="visual"><img class="analysis-img" data-card="drink-3" alt="味レーダー（ドリンク3）" /></div>
              <details class="why"><summary>なぜこれ？</summary><p id="why-drink-3">安全枠内で新しい味レンジ。</p></details>
              <button class="btn btn-order" data-go="18" type="button">注文へ</button>
            </article>
          </div>
        </div>
      </section>

      <!-- 08/16/17/18: Queues -->
      <section class="tpl-step" data-step="8">
        <div class="stack gap-24">
          <h2 class="h1">調理キュー（パスタ）</h2>

          <!-- 注文状況 -->
          <div class="order card">
            <div class="order-grid">
              <div class="order-item">
                <span class="order-key">番号</span>
                <strong id="order-no-pasta" class="order-val">P-012</strong>
              </div>
              <div class="order-item">
                <span class="order-key">ETA</span>
                <strong class="order-val">04:30</strong>
              </div>
              <div class="order-item">
                <span class="order-key">Live</span>
                <div class="order-val"><div class="live placeholder">ロボシェフ</div></div>
              </div>
            </div>
          </div>

          <!-- 麺のゆで加減 -->
          <div class="card stack gap-16" id="pasta-doneness-card">
            <div class="card-head">
              <h3 class="h2">麺のゆで加減</h3>
              <p class="caption">お好みの茹で上がりをお選びください。選択後に「次へ」を押すとサラダへ進みます。</p>
            </div>

            <fieldset class="choice-group" aria-describedby="doneness-help">
              <legend class="sr-only">麺のゆで加減の選択</legend>

              <div class="radio-card">
                <input type="radio" id="doneness-al" name="pasta-doneness" value="アルデンテ" />
                <label for="doneness-al">
                  <span class="choice-title">アルデンテ</span>
                  <span class="choice-desc">芯をわずかに残した、かための食感</span>
                </label>
              </div>

              <div class="radio-card">
                <input type="radio" id="doneness-std" name="pasta-doneness" value="標準" />
                <label for="doneness-std">
                  <span class="choice-title">標準</span>
                  <span class="choice-desc">バランスの良いおすすめの茹で上がり</span>
                </label>
              </div>

              <div class="radio-card">
                <input type="radio" id="doneness-soft" name="pasta-doneness" value="柔らかめ" />
                <label for="doneness-soft">
                  <span class="choice-title">柔らかめ</span>
                  <span class="choice-desc">ソースとなじむ、やわらかい食感</span>
                </label>
              </div>
            </fieldset>
            <p id="doneness-help" class="caption">※ 選択はいつでも戻って変更できます。</p>

            <div class="selected-hint" aria-live="polite">
              現在の選択：<strong id="pasta-doneness-selected">未選択</strong>
            </div>
          </div>
        </div>
      </section>

      <section class="tpl-step" data-step="16">
        <div class="stack gap-24">
          <h2 class="h1">調理キュー（サラダ）</h2>
          <div class="order card">
            <div class="order-grid">
              <div class="order-item"><span class="order-key">番号</span><strong id="order-no-salad" class="order-val">S-102</strong></div>
              <div class="order-item"><span class="order-key">ETA</span><strong class="order-val">03:10</strong></div>
              <div class="order-item"><span class="order-key">Live</span><div class="order-val"><div class="live placeholder">ロボシェフ</div></div></div>
            </div>
          </div>
        </div>
      </section>

      <section class="tpl-step" data-step="17">
        <div class="stack gap-24">
          <h2 class="h1">調理キュー（クレープ）</h2>

          <div class="order card">
            <div class="order-grid">
              <div class="order-item"><span class="order-key">番号</span><strong id="order-no-crepe" class="order-val">C-221</strong></div>
              <div class="order-item"><span class="order-key">ETA</span><strong class="order-val">03:50</strong></div>
              <div class="order-item"><span class="order-key">Live</span><div class="order-val"><div class="live placeholder">ロボパティシエ</div></div></div>
            </div>
          </div>

          <!-- ★ 甘さ加減 -->
          <div class="card stack gap-16" id="crepe-sweetness-card">
            <div class="card-head">
              <h3 class="h2">甘さ加減</h3>
              <p class="caption">お好みの甘さをお選びください。選択後に「次へ」を押すとドリンクへ進みます。</p>
            </div>

            <fieldset class="choice-group" aria-describedby="sweetness-help">
              <legend class="sr-only">甘さ加減の選択</legend>

              <div class="radio-card">
                <input type="radio" id="sweetness-sweet" name="crepe-sweetness" value="甘さ" />
                <label for="sweetness-sweet">
                  <span class="choice-title">甘さ</span>
                  <span class="choice-desc">しっかり甘めで満足感のある味わい</span>
                </label>
              </div>

              <div class="radio-card">
                <input type="radio" id="sweetness-light" name="crepe-sweetness" value="微甘" />
                <label for="sweetness-light">
                  <span class="choice-title">微甘</span>
                  <span class="choice-desc">控えめな甘さで軽い仕上がり</span>
                </label>
              </div>

              <div class="radio-card">
                <input type="radio" id="sweetness-none" name="crepe-sweetness" value="甘くない" />
                <label for="sweetness-none">
                  <span class="choice-title">甘くない</span>
                  <span class="choice-desc">糖分を抑えたすっきりテイスト</span>
                </label>
              </div>
            </fieldset>

            <p id="sweetness-help" class="caption">※ 選択はいつでも戻って変更できます。</p>

            <div class="selected-hint" aria-live="polite">
              現在の選択：<strong id="crepe-sweetness-selected">未選択</strong>
            </div>
          </div>
        </div>
      </section>

      <section class="tpl-step" data-step="18">
        <div class="stack gap-24">
          <h2 class="h1">調理キュー（ドリンク）</h2>
        <div class="order card">
          <div class="order-grid">
            <div class="order-item"><span class="order-key">番号</span><strong id="order-no-drink" class="order-val">D-045</strong></div>
            <div class="order-item"><span class="order-key">ETA</span><strong class="order-val">02:40</strong></div>
            <div class="order-item"><span class="order-key">Live</span><div class="order-val"><div class="live placeholder">バリスタロボ</div></div></div>
          </div>
        </div>
        </div>
      </section>

      <!-- 10: Staff Help -->
      <section class="tpl-step" data-step="10">
        <div class="stack gap-24">
          <h2 class="h1">スタッフヘルプ</h2>
          <div class="grid-2">
            <button id="call-staff" class="btn btn-primary" type="button">スタッフを呼ぶ</button>
            <div class="faq card">
              <h3 class="h2">よくある質問</h3>
              <ul class="body">
                <li>データは匿名で保存されますか？</li>
                <li>宗教・アレルギーへの配慮は？</li>
                <li>AIと量子の役割は？</li>
              </ul>
            </div>
          </div>
          <p id="call-status" class="caption" aria-live="polite" hidden></p>
        </div>
      </section>

      <!-- 11: Thank You -->
      <section class="tpl-step" data-step="11">
        <div class="stack gap-24 center">
          <h2 class="h1">ご注文ありがとうございました</h2>
          <p class="body">
            いただいた回答をもとに、あなただけのメニューをご用意いたします。<br />
            お好きなお席でくつろぎながら、出来上がりをお待ちください。
          </p>
          <div class="actions-row">
            <button class="btn btn-primary" type="button" data-jump="1">トップに戻る</button>
          </div>
        </div>
      </section>

    </main>

    <!-- Footer -->
    <footer class="org-footer" role="contentinfo">
      <button id="footer-back" class="btn btn-secondary" type="button">戻る</button>
      <div class="progress small" aria-hidden="true">
        <ol>
          <li class="is-active"></li>
          <li></li><li></li><li></li><li></li>
        </ol>
      </div>
      <button id="footer-next" class="btn btn-primary" type="button">次へ</button>
    </footer>
  </div>
  <script src="./js/script.js"></script>
</body>
</html>